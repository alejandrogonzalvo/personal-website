---
import Section from './Section.astro';

const technologies = [
  {
    category: "Languages",
    skills: ["Python", "Rust", "TypeScript/JavaScript", "C++", "PHP", "SQL", "Shell Scripting (Bash)"]
  },
  {
    category: "Frameworks",
    skills: ["FastAPI", "React", "Three.js", "Pandas"]
  },
  {
    category: "DevOps & Cloud",
    skills: ["AWS", "Docker", "CI/CD (GitLab CI)", "Git", "Linux System Administration", "Automation"]
  },
  {
    category: "Testing & Methodologies",
    skills: ["End-to-End Testing (Playwright)", "Unit Testing", "TDD", "Accessibility (WCAG)", "Agile"]
  }
];
---

<Section class="technologies">
  <h2>Technologies</h2>
  
  <div class="grid">
    {technologies.map((group, index) => (
      <div class="tech-card scroll-animate" style={`transition-delay: ${index * 100}ms`}>
        <h3>{group.category}</h3>
        <ul class="skills-list">
          {group.skills.map(skill => (
            <li>{skill}</li>
          ))}
        </ul>
      </div>
    ))}
  </div>
</Section>

<script>
  import { ANIMATION_ROOT_MARGIN } from '../config';

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, {
    threshold: 0.1,
    rootMargin: ANIMATION_ROOT_MARGIN
  });

  document.querySelectorAll('.scroll-animate').forEach((item) => {
    observer.observe(item);
  });
</script>

<style>
  h2 {
    font-size: 3rem;
    margin-bottom: 3rem;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }

  .tech-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 2rem;
    transition: transform 0.3s ease, border-color 0.3s ease;
    
    /* Animation initial state */
    opacity: 0;
    transform: translateY(20px);
  }

  .tech-card.visible {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .tech-card:hover {
    transform: translateY(-5px);
    border-color: var(--accent-color);
  }

  h3 {
    color: var(--accent-color);
    font-size: 1.5rem;
    margin: 0 0 1.5rem 0;
  }

  .skills-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .skills-list li {
    background: rgba(255, 255, 255, 0.05);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.95rem;
    color: var(--text-secondary);
    transition: background 0.2s, color 0.2s;
  }

  .tech-card:hover .skills-list li {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
  }
</style>
