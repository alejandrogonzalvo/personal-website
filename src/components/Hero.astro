---
---

<section class="hero-section" id="hero">
	<div class="content">
        <!-- Name Typewriter Container -->
		<h1 id="name-typewriter" class="one-line-title"></h1>
        
        <!-- Role Typewriter Container -->
		<h2 id="role-typewriter"></h2>
		
        <!-- Buttons container -->
		<div class="actions fade-in-buttons">
			<a href="/contact" class="btn primary">Contact Me</a>
		</div>
	</div>
	
	<a href="#experience" class="scroll-down fade-in-scroll" id="scroll-hint" aria-label="Scroll down">
		<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
			<path d="M7 13l5 5 5-5M7 6l5 5 5-5"/>
		</svg>
	</a>
</section>

<script>
    // Handle Scroll Hint Fade Out
    const scrollHint = document.getElementById('scroll-hint');
    if (scrollHint) {
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                scrollHint.style.opacity = '0';
                scrollHint.style.pointerEvents = 'none';
            } else {
                if (scrollHint.classList.contains('visible')) {
                    scrollHint.style.opacity = '1';
                    scrollHint.style.pointerEvents = 'auto';
                }
            }
        });
    }
</script>

<script>
  import Typewriter from 'typewriter-effect/dist/core';
  import { ANIMATION_ROOT_MARGIN } from '../config';

  const nameEl = document.getElementById('name-typewriter');
  const roleEl = document.getElementById('role-typewriter');
  // We need to cast to HTMLElement to access style
  const buttonsInfo = document.querySelectorAll('.fade-in-buttons');

  // Shared Observer for all Hero elements
  const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
          if (entry.isIntersecting) {
              entry.target.classList.add('visible');
          } else {
              entry.target.classList.remove('visible');
          }
      });
  }, {
      threshold: 0.1,
      rootMargin: ANIMATION_ROOT_MARGIN
  });

  const observeElement = (el) => {
      if (!el) return;
      observer.observe(el);
      // If it's already in view (likely), the observer will trigger 'visible'
      // But for cleaner initial state if JS loads fast:
      // el.classList.add('visible'); // Let observer handle it to be safe/consistent
  };

  const showButtons = () => {
      buttonsInfo.forEach(el => {
          observeElement(el);
      });
      // Handle scroll hit separately
      const scrollHint = document.getElementById('scroll-hint');
      if (scrollHint) scrollHint.classList.add('visible');

      // Handle Header fade-in
      const header = document.querySelector('header');
      if (header) header.classList.add('visible');
  };

  const nameTw = new Typewriter(nameEl, {
      delay: 50,
      cursor: '|', // Keep cursor while typing
  });

  const roleTw = new Typewriter(roleEl, {
      delay: 50,
      loop: true,
      autoStart: false,
      cursor: '|'
  });

  // Setup Role Sequence
  roleTw
      .typeString('Software Engineer')
      .callFunction(() => {
          // First string finished. Wait 0.5s then show buttons.
          setTimeout(showButtons, 100);
      })
      .pauseFor(1500)
      .deleteAll()
      .typeString('Full Stack Developer')
      .pauseFor(1500)
      .deleteAll()
      .typeString('CERN Alumnus')
      .pauseFor(1500)
      .deleteAll()
      .typeString('Quantum Researcher')
      .pauseFor(1500)
      .deleteAll()
      .typeString('Triathlete')
      .pauseFor(1500)
      .deleteAll()
      .typeString('Gamer')
      .pauseFor(1500)
      .deleteAll();


  // Start Main Sequence
  // 1. Start observing h1 immediately so it appears
  observeElement(nameEl);

  nameTw
      .typeString("Greeti")
      .pauseFor(500)
      .deleteAll()
      .pauseFor(200)
      .typeString("Hi")
      .pauseFor(500)
      .typeString(", I'm Alejandro")
      .pauseFor(200)
      .callFunction(() => {
          // Remove cursor from name after typing
          const cursor = nameEl.querySelector('.Typewriter__cursor');
          if (cursor) cursor.style.display = 'none';
          
          setTimeout(() => {
              // 2. Reveal h2 via observer
              observeElement(roleEl);
              roleTw.start();
          }, 100);
      })
      .start();

</script>

<style>
	.hero-section {
		height: 100vh; /* Force full screen height */
		width: 100%;
        display: flex;
		flex-direction: column;
		justify-content: center;
        align-items: center; /* Center horizontally */
		position: relative;
        overflow: hidden; 
        padding: 0 1rem;
        /* Ensure no margin interference */
        margin: 0;
	}
    
    .content {
        z-index: 10;
        width: 100%;
        max-width: 1000px;
        text-align: center; /* Center text */
        display: flex;
        flex-direction: column;
        align-items: center; /* Center buttons */
    }

	h1 {
		font-size: 5rem;
		line-height: 1.1;
		font-weight: 800;
		margin-bottom: 0.5rem;
		letter-spacing: -0.02em;
        white-space: nowrap; 
        min-height: 1.1em;
        
        /* Animation */
        opacity: 0;
        transition: opacity 0.6s ease-out;
        will-change: opacity;
	}
    h1.visible {
        opacity: 1;
    }
    
	h2 {
		font-size: 2rem;
		color: var(--accent-color);
		font-weight: 600;
		margin-bottom: 3rem; /* Increased spacing */
		min-height: 2.5rem;
        
        /* Animation */
        opacity: 0; 
        transition: opacity 0.6s ease-out;
        will-change: opacity;
	}
    h2.visible {
        opacity: 1;
    }
	
	.actions {
		display: flex;
		gap: 1.5rem;
        justify-content: center;
	}
	
	/* Buttons & Scroll Hint Initial State */
	.fade-in-buttons {
		opacity: 0;
        transform: translateY(10px);
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        visibility: hidden;
	}
    
    .fade-in-buttons.visible {
        opacity: 1;
        transform: translateY(0);
        visibility: visible;
    }
    
    .fade-in-scroll {
		opacity: 0;
        transform: translateY(10px);
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        visibility: hidden;
    }
    
    .fade-in-scroll.visible {
        opacity: 1;
        transform: translateY(0);
        visibility: visible;
    }

	.btn {
		text-decoration: none;
		padding: 1rem 2rem;
		border-radius: 8px;
		font-weight: 500;
		transition: all 0.2s ease;
		font-size: 1.1rem;
	}
	.btn.primary {
		background: var(--text-primary);
		color: var(--bg-color);
	}
	.btn.primary:hover {
		background: var(--text-secondary);
		transform: translateY(-2px);
	}
	.btn.secondary {
		border: 1px solid var(--surface-color);
		color: var(--text-primary);
		background: var(--surface-color);
	}
	.btn.secondary:hover {
		border-color: var(--text-secondary);
		transform: translateY(-2px);
	}
	
	.scroll-down {
		position: absolute;
        bottom: 2.5rem;
		left: 50%;
        transform: translateX(-50%);
		color: var(--text-secondary);
        cursor: pointer;
        transition: opacity 0.3s ease;
	}
    
    .scroll-down.visible {
        animation: bounce 2s infinite;
    }

	@keyframes bounce {
		0%, 20%, 50%, 80%, 100% {transform: translateX(-50%) translateY(0);}
		40% {transform: translateX(-50%) translateY(-10px);}
		60% {transform: translateX(-50%) translateY(-5px);}
	}

	@media (max-width: 1024px) {
		h1 {
			font-size: 3.5rem;
		}
	}
    @media (max-width: 600px) {
        h1 {
            font-size: 2.2rem; 
        }
        h2 {
            font-size: 1.5rem;
        }
        .actions {
            flex-direction: column;
            width: 100%;
            max-width: 300px;
        }
        .btn {
            width: 100%;
            text-align: center;
        }
    }
</style>
